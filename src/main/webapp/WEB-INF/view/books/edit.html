<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Ch·ªânh s·ª≠a s√°ch</title>
  </head>
  <body>
    <h1>üìù Ch·ªânh s·ª≠a th√¥ng tin s√°ch</h1>
    <div th:if="${error}">
      <p style="color: red" th:text="${error}"></p>
    </div>

    <form th:action="@{/books/edit}" th:object="${book}" method="post" enctype="multipart/form-data">
      <input type="hidden" th:field="*{id}" />
      <!-- B·∫Øt bu·ªôc ph·∫£i c√≥ d√≤ng n√†y ƒë·ªÉ khi g·ª≠i l√™n /edit c√≥ th·ªÉ book m·ªõi c√≥ tr∆∞·ªùng id-->
      <label for="title">T√™n s√°ch:</label>
      <input type="text" id="title" th:field="*{title}" required />
      <br />

      <label for="authorName">T√°c gi·∫£:</label>
      <input type="text" id="authorName" th:field="*{authorName}" required />
      <br />

      <label for="publishedDate">Ng√†y xu·∫•t b·∫£n:</label>
      <input type="date" id="publishedDate" th:field="*{publishedDate}" placeholder="yyyy-MM-dd" required />
      <br />

      <label>Th·ªÉ lo·∫°i:</label>
      <div th:each="cat : ${categories}">
        <input type="checkbox" th:field="*{categories}" th:value="${cat.id}" th:checked="${book.categories.contains(cat)}" />
        <span th:text="${cat.name}"></span><br />
      </div>

      <div class="current-image-section">
        <p>·∫¢nh ƒë·∫°i di·ªán hi·ªán t·∫°i:</p>
        <div th:if="${book.imageUrl != null and !book.imageUrl.isEmpty()}">
          <img th:src="${book.imageUrl}" alt="·∫¢nh b√¨a hi·ªán t·∫°i" />
          <br />
        </div>
        <div th:unless="${book.imageUrl != null and !book.imageUrl.isEmpty()}">
          <span>Kh√¥ng c√≥ ·∫£nh b√¨a hi·ªán t·∫°i.</span>
        </div>
      </div>
      <label for="bookImage">Ch·ªçn ·∫£nh m·ªõi (ƒë·ªÉ thay th·∫ø ho·∫∑c th√™m):</label>
      <input type="file" id="bookImage" name="bookImage" accept="image/*" /><br />

      <button type="submit">L∆∞u thay ƒë·ªïi</button>
    </form>

    <a href="/books">‚Üê Quay l·∫°i danh s√°ch s√°ch</a>
  </body>
</html>
